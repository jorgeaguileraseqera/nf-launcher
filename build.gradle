/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.4.2/samples
 */
plugins {
    id 'java'
    id 'application'
    id 'org.graalvm.buildtools.native' version '0.9.17'
}


repositories {
    maven { url 'https://repo.gradle.org/gradle/libs-releases' }
}

ext.toolingApiVersion = '7.4.2'

dependencies {
    implementation "org.gradle:gradle-tooling-api:$toolingApiVersion"
    // The tooling API need an SLF4J implementation available at runtime, replace this with any other implementation
    runtimeOnly 'org.slf4j:slf4j-simple:1.7.10'
}

application {
    mainClass = 'io.nextflow.launcher.Launcher'
}

jar {
    manifest {
        attributes "Main-Class": "io.nextflow.launcher.Launcher"
    }

    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

graalvmNative {
    binaries {
        main {
            useFatJar = true
        }
    }
}